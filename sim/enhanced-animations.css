/* Enhanced Degenerette Animations */

/* ===== RANDOM BUTTON ===== */
.random-button {
  justify-self: start;
}

.random-button:hover {
  background: var(--accent-primary);
  border-color: var(--accent-primary);
  color: white;
}

/* Anticipation removed for cleaner feel */

/* ===== TOKEN REVEAL ANIMATION ===== */
/* Disable transitions on player token to prevent jiggle on edit */
#ft-player .gp-quadrant,
#ft-player .gamepiece-result {
  transition: none !important;
}

.gp-quadrant {
  transform-origin: center;
}

/* Clean fade-in scale for reveals */
.gp-quadrant.revealing {
  animation: tokenReveal 0.35s ease-out forwards;
}

@keyframes tokenReveal {
  0% {
    transform: scale(0.8);
    opacity: 0.4;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

/* ===== MATCH STATES ===== */
/* Static glow only - no animations */
.gp-quadrant.q-both-match {
  box-shadow: 0 0 12px rgba(34, 197, 94, 0.5);
}

.gp-quadrant.q-partial-match {
  box-shadow: 0 0 10px rgba(234, 179, 8, 0.4);
}

/* ===== SPECIAL TOKEN REVEAL ===== */
.gamepiece-special-container.revealing {
  animation: specialReveal 0.4s ease-out forwards;
}

@keyframes specialReveal {
  0% {
    transform: translate(-50%, -50%) scale(0.5);
    opacity: 0;
  }
  100% {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }
}

.gamepiece-special-container.special-match {
  filter: drop-shadow(0 0 8px var(--success));
}

/* ===== SHUFFLE EFFECT ===== */
.gp-quadrant.shuffling {
  animation: shuffle 0.15s ease-in-out;
}

@keyframes shuffle {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.4; transform: scale(0.95); }
}

/* ===== PARTICLE SYSTEM ===== */
.particle-container {
  position: fixed;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
  z-index: 1000;
}

.particle {
  position: absolute;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: radial-gradient(circle, #fff 0%, rgba(139, 92, 246, 0.9) 100%);
  box-shadow: 0 0 10px rgba(139, 92, 246, 0.8);
  animation: particleBurst var(--duration, 1s) ease-out forwards;
  opacity: 0;
}

@keyframes particleBurst {
  0% {
    transform: translate(0, 0) scale(1);
    opacity: 1;
  }
  100% {
    transform: translate(var(--tx, 0), var(--ty, 0)) scale(0.3);
    opacity: 0;
  }
}

/* Star-shaped particles for big wins */
.particle.star {
  width: 8px;
  height: 8px;
  background: radial-gradient(circle, #fbbf24 0%, #f59e0b 100%);
  box-shadow: 0 0 12px rgba(251, 191, 36, 0.9);
  clip-path: polygon(50% 0%, 61% 35%, 98% 35%, 68% 57%, 79% 91%, 50% 70%, 21% 91%, 32% 57%, 2% 35%, 39% 35%);
}

/* ===== ENHANCED VISUAL DEPTH ===== */
.gamepiece-result.gamepiece-hero {
  box-shadow:
    0 25px 50px rgba(0, 0, 0, 0.2),
    0 12px 24px rgba(0, 0, 0, 0.15),
    inset 0 2px 0 rgba(255, 255, 255, 0.3),
    inset 0 -3px 0 rgba(0, 0, 0, 0.1);
}

/* Removed hover bob for cleaner feel */

/* Enhanced cross dividers with gradient */
.gamepiece-result.gamepiece-hero::before {
  background: linear-gradient(180deg,
    rgba(139, 92, 246, 1) 0%,
    rgba(139, 92, 246, 0.8) 50%,
    rgba(139, 92, 246, 1) 100%);
  box-shadow: 0 0 8px rgba(139, 92, 246, 0.4);
}

.gamepiece-result.gamepiece-hero::after {
  background: linear-gradient(90deg,
    rgba(139, 92, 246, 1) 0%,
    rgba(139, 92, 246, 0.8) 50%,
    rgba(139, 92, 246, 1) 100%);
  box-shadow: 0 0 8px rgba(139, 92, 246, 0.4);
}

/* ===== SPIN BUTTON ENHANCEMENTS ===== */
.spin-button {
  position: relative;
  overflow: hidden;
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.spin-button::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    120deg,
    rgba(255, 255, 255, 0) 0%,
    rgba(255, 255, 255, 0.3) 50%,
    rgba(255, 255, 255, 0) 100%
  );
  transform: translateX(-100%);
  transition: transform 0.6s ease;
}

.spin-button:hover::before {
  transform: translateX(100%);
}

.spin-button:active {
  transform: translateY(2px) scale(0.98);
}

.spin-button.spinning {
  pointer-events: none;
}

.spin-button.spinning::after {
  content: '';
  position: absolute;
  width: 18px;
  height: 18px;
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-top-color: white;
  border-radius: 50%;
  animation: buttonSpin 0.7s linear infinite;
  right: 16px;
  top: 50%;
  transform: translateY(-50%);
}

@keyframes buttonSpin {
  to { transform: translateY(-50%) rotate(360deg); }
}

/* ===== HISTORY ITEM ANIMATIONS ===== */
.history-item {
  animation: historySlideIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1) backwards;
}

.history-item:nth-child(1) { animation-delay: 0s; }
.history-item:nth-child(2) { animation-delay: 0.05s; }
.history-item:nth-child(3) { animation-delay: 0.1s; }
.history-item:nth-child(4) { animation-delay: 0.15s; }
.history-item:nth-child(5) { animation-delay: 0.2s; }

@keyframes historySlideIn {
  from {
    opacity: 0;
    transform: translateX(-20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateX(0) scale(1);
  }
}

/* ===== WIN CELEBRATION OVERLAY ===== */
.win-celebration {
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 999;
  display: flex;
  align-items: center;
  justify-content: center;
}

.win-text {
  font-size: clamp(2rem, 8vw, 4rem);
  font-weight: 900;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  color: var(--success);
  text-shadow:
    0 0 20px rgba(34, 197, 94, 0.8),
    0 0 40px rgba(34, 197, 94, 0.5);
  animation: winTextPop 1s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
  opacity: 0;
}

@keyframes winTextPop {
  0% {
    opacity: 0;
    transform: scale(0.5) rotate(-5deg);
  }
  50% {
    opacity: 1;
    transform: scale(1.1) rotate(2deg);
  }
  70% {
    transform: scale(0.95) rotate(-1deg);
  }
  100% {
    opacity: 0;
    transform: scale(1) rotate(0deg) translateY(-30px);
  }
}

/* Jackpot-specific celebration */
.win-text.jackpot {
  color: #fbbf24;
  text-shadow:
    0 0 30px rgba(251, 191, 36, 0.9),
    0 0 60px rgba(251, 191, 36, 0.6),
    0 0 90px rgba(251, 191, 36, 0.3);
  animation: jackpotTextPop 1.5s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes jackpotTextPop {
  0% {
    opacity: 0;
    transform: scale(0.3) rotate(-10deg);
    filter: blur(10px);
  }
  40% {
    opacity: 1;
    transform: scale(1.3) rotate(5deg);
    filter: blur(0);
  }
  60% {
    transform: scale(0.9) rotate(-3deg);
  }
  80% {
    transform: scale(1.05) rotate(1deg);
  }
  100% {
    opacity: 0;
    transform: scale(1) rotate(0deg) translateY(-50px);
  }
}

/* ===== QUICK SELECTOR ENHANCEMENTS ===== */
.quick-selector {
  backdrop-filter: blur(12px);
  background: rgba(26, 26, 46, 0.95);
  border: 1px solid rgba(139, 92, 246, 0.3);
  box-shadow:
    0 20px 40px rgba(0, 0, 0, 0.4),
    0 0 0 1px rgba(139, 92, 246, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
  animation: selectorSlideIn 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
}

@keyframes selectorSlideIn {
  from {
    opacity: 0;
    transform: translateY(-8px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.quick-selector button {
  transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
  position: relative;
}

.quick-selector button:hover {
  transform: translateY(-3px) scale(1.08);
  box-shadow: 0 8px 16px rgba(139, 92, 246, 0.4);
}

.quick-selector button:active {
  transform: translateY(0) scale(1);
}

/* ===== NET RESULT BOX ANIMATION ===== */
.net-result-box {
  transition: all 0.3s ease;
}

.net-result-box .net-token-value.positive {
  animation: positiveResult 0.5s ease-out;
}

.net-result-box .net-token-value.negative {
  animation: negativeResult 0.5s ease-out;
}

@keyframes positiveResult {
  0% { transform: scale(1); }
  50% { transform: scale(1.15); color: #4ade80; }
  100% { transform: scale(1); }
}

@keyframes negativeResult {
  0% { transform: scale(1); }
  30% { transform: translateX(-3px); }
  60% { transform: translateX(3px); }
  100% { transform: scale(1) translateX(0); }
}

/* Empty state - no animation */

/* ===== HISTORY LAYOUT FIXES ===== */
.history-compare {
  gap: 0.4rem;
}

.history-compare .mini-label {
  font-size: 0.55rem;
  white-space: nowrap;
}

.history-compare .mini-label.matches-label {
  font-size: 0.6rem;
  white-space: nowrap;
}

.history-net-big {
  font-size: 1rem;
  min-width: 50px;
}
