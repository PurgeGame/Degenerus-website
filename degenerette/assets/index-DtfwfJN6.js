(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const ut=[10,10,10,10,9,9,9,8],dt=75,Bt=["pink","purple","green","red","blue","orange","silver","gold"],Se=["Pink","Purple","Green","Red","Blue","Orange","Silver","Gold"],te=["crypto","zodiac","cards","dice"],we={crypto:["xrp","tron","sui","monero","solana","chainlink","ethereum","bitcoin"],zodiac:["aries","taurus","gemini","cancer","leo","libra","sagittarius","aquarius"],cards:["club","diamond","heart","spade","horseshoe","cashsack","king","ace"],dice:["1","2","3","4","5","6","7","8"]},_e={crypto:["WWXRP","Tron","Sui","Monero","Solana","Chainlink","Ethereum","Bitcoin"],zodiac:["Aries","Taurus","Gemini","Cancer","Leo","Libra","Sagittarius","Aquarius"],cards:["Club","Diamond","Heart","Spade","Horseshoe","Cashsack","King","Ace"],dice:["1","2","3","4","5","6","7","8"]},$e=[3,4,5,6,0,2,1,7];function Re(t,e){return t==="cards"?$e[e]??e:e}function ee(t,e,n){const o=te[t],s=Re(o,e),a=we[o][e],i=Bt[n];return`/badges-circular/${o}_0${s}_${a}_${i}.svg`}const Ce=0,tt=3,ne=["ETH","BURNIE","DGNRS","WWXRP"],Be=[0,0,190,475,1500,4250,19500,1e5,1e7],_={MIN_SCORE:0,MID_SCORE:7500,HIGH_SCORE:25500,MAX_SCORE:35500},k={MIN:9e3,MID:9500,HIGH:9950,MAX:9990},ke=500,bt=9e3,qt=10990,Te=1e6,Ie=1531388,Me=13016797,Le=57745766,xe=30027799,Pe=1e4,Ne=9500,Oe=[23500,14166,11833,10900,10433,10166],C={LEVEL_STREAK_MAX:50,LEVEL_STREAK_BPS:100,MINT_COUNT_MAX:25,MINT_COUNT_BPS:100,QUEST_STREAK_MAX:100,QUEST_STREAK_BPS:100,AFFILIATE_BPS:100,TROPHY_MAX:5,TROPHY_BPS:1e3,DEITY_PASS_BPS:8e3,WHALE_BUNDLE_SMALL_BPS:1e3,WHALE_BUNDLE_LARGE_BPS:4e3};class Ae{state;constructor(e=BigInt(Date.now())){this.state=[e,e^BigInt("0xdeadbeefcafebabe")];for(let n=0;n<20;n++)this.next()}next(){let e=this.state[0];const n=this.state[1];return this.state[0]=n,e^=e<<23n,e^=e>>17n,e^=n,e^=n>>26n,this.state[1]=e,this.state[0]+this.state[1]&(1n<<64n)-1n}nextInRange(e){return Number(this.next()%BigInt(e))}nextFloat(){return Number(this.next()%(1n<<53n))/Number(1n<<53n)}}let qe=new Ae;function F(t){return qe.nextInRange(t)}function He(t){const e=t%dt;let n=0;for(let o=0;o<ut.length;o++)if(n+=ut[o],e<n)return o;return 7}function Ht(){return He(F(dt))}function at(t){return{quadrant:t,color:Ht(),symbol:Ht()}}function ft(){return{traits:[at(0),at(1),at(2),at(3)]}}function J(t,e){let n=0;for(let o=0;o<4;o++)t.traits[o].color===e.traits[o].color&&n++,t.traits[o].symbol===e.traits[o].symbol&&n++;return n}function De(){return{levelStreak:0,mintCount:0,questStreak:0,affiliateBonus:0,trophyCount:0,hasDeityPass:!1,whaleBundleType:"none"}}function kt(t){let e=0;return e+=Math.min(t.levelStreak,C.LEVEL_STREAK_MAX)*C.LEVEL_STREAK_BPS,e+=Math.min(t.mintCount,C.MINT_COUNT_MAX)*C.MINT_COUNT_BPS,e+=Math.min(t.questStreak,C.QUEST_STREAK_MAX)*C.QUEST_STREAK_BPS,e+=t.affiliateBonus*C.AFFILIATE_BPS,e+=Math.min(t.trophyCount,C.TROPHY_MAX)*C.TROPHY_BPS,t.hasDeityPass&&(e+=C.DEITY_PASS_BPS),t.whaleBundleType==="small"?e+=C.WHALE_BUNDLE_SMALL_BPS:t.whaleBundleType==="large"&&(e+=C.WHALE_BUNDLE_LARGE_BPS),e}function oe(t,e){let n;if(t<=_.MIN_SCORE)n=k.MIN;else if(t<=_.MID_SCORE){const o=t/_.MID_SCORE,s=o*o;n=k.MIN+Math.floor((k.MID-k.MIN)*s)}else if(t<=_.HIGH_SCORE){const o=(t-_.MID_SCORE)/(_.HIGH_SCORE-_.MID_SCORE);n=k.MID+Math.floor((k.HIGH-k.MID)*o)}else if(t<=_.MAX_SCORE){const o=(t-_.HIGH_SCORE)/(_.MAX_SCORE-_.HIGH_SCORE);n=k.HIGH+Math.floor((k.MAX-k.HIGH)*o)}else n=k.MAX;return n}function Tt(t){if(t<=_.MIN_SCORE)return bt;if(t>=_.MAX_SCORE)return qt;const e=t/_.MAX_SCORE;return bt+Math.floor((qt-bt)*e)}function Fe(t){return(t/100).toFixed(2)+"%"}function We(t,e=2){if(!Number.isFinite(t))return"n/a";const n=Number(t.toFixed(e)),s=!Number.isInteger(n)?e:0;return n.toLocaleString(void 0,{minimumFractionDigits:s,maximumFractionDigits:s})}function Dt(t,e){const n=e===tt?"":ne[e]??"",o=We(t,2);return n?`${o} ${n}`:o}function it(t){return Number.isFinite(t)?`x${t.toFixed(2)}`:"n/a"}function Ue(t,e){const n=t.reduce((s,[a])=>Math.max(s,a.length),0),o=t.map(([s,a])=>`${s.padEnd(n," ")} | ${a}`);if(e&&o.length>=2){const s=o.reduce((i,r)=>Math.max(i,r.length),0),a="-".repeat(s);o.splice(o.length-1,0,a)}return o.join(`
`)}function Ft(t){return t<5?0:t}function Wt(t,e){let n=0;return t===5?n=Ie:t===6?n=Me:t===7?n=Le:t===8&&(n=xe),n===0?0:Math.floor(e*n/Te)}function Ge(t,e){let n=1,o=1;for(let s=0;s<4;s++){const a=t.traits[s].color,i=t.traits[s].symbol,r=e.traits[s].color,c=e.traits[s].symbol,l=ut[a],u=ut[i],d=a===r,m=i===c;d&&m?(n*=100,o*=l*u):d||m?(n*=1300,o*=75*(l+u)-2*l*u):(n*=4225,o*=(dt-l)*(dt-u))}return n/o}function se(t,e,n,o,s,a,i=0,r=null){const c=J(t,e),l=Be[c],u=c===8;let d=o;if(s===tt&&i>o){const h=Ft(c);if(h!==0){const S=i-o,et=Wt(h,S);d=o+et}}else if(s===Ce){const h=Ft(c);if(h!==0){const S=Wt(h,ke);d=o+S}}let m=n*l*d/1e6;const p=Ge(t,e);m=m*p;let f=1;if(r!==null&&r>=0&&r<4&&c>=2&&c<8){const h=t.traits[r],S=e.traits[r];f=(h.color===S.color&&h.symbol===S.symbol?Oe[c-2]:Ne)/Pe,m=m*f}const M=d/1e4,B=l/100,E=m<=0,$=`${c} ${c===1?"match":"matches"}`,y=[[Dt(n,s),"Bet"],[it(B),$]];E||(y.push([it(M),"Activity score"],[it(p),"Difficulty"]),f!==1&&y.push([it(f),"Hero bonus"]),y.push([Dt(m,s),"Payout"]));const v=Ue(y,!E);return{matches:c,payoutMultiplierBps:l,payout:m,playerTicket:t,resultTicket:e,isJackpot:u,math:v}}function Ve(t,e){const n={0:.01,1:500,2:0,3:20};return e===2?!1:t>=n[e]}const ae=1,ie=2,re=3,vt=4,Xe=[{chance:1,multiplier:4.6},{chance:4,multiplier:2.3},{chance:20,multiplier:1.1},{chance:45,multiplier:.651},{chance:30,multiplier:.45}],Ut=[{chance:795,ppmPerEth:10,tier:"small"},{chance:150,ppmPerEth:390,tier:"medium"},{chance:50,ppmPerEth:800,tier:"large"},{chance:5,ppmPerEth:8e3,tier:"mega"}],rt={low:{baseBps:3e3,stepBps:250},high:{baseBps:15525,stepBps:5e3}},Gt=1e6;function je(t,e){const n=F(20);return n<=10?Ye(t,e,n):n<=12?Ke(t,n):n<=14?ze(n):Je(t,e,n)}let Vt=1;function Ye(t,e,n){const o=t*.1272,s=F(100);let a=0,i=.45,r="small";for(const f of Xe)if(a+=f.chance,s<a){i=f.multiplier,f.multiplier>=4?r="mega":f.multiplier>=2?r="large":f.multiplier>=1?r="medium":r="small";break}const c=o*i,l=.01*(1+Vt*.05),u=Math.max(1,Math.floor(c/l)),d=Vt+1,m=u*l,p=[`lootboxValue = ${t.toFixed(6)} ETH`,`mainRoll = ${n} (0-10 => tickets)`,`budget = lootboxValue * 0.1272 = ${o.toFixed(6)}`,`varianceRoll = ${s} => multiplier ${i}`,`ticketValue = budget * multiplier = ${c.toFixed(6)}`,`ticketPrice = 0.01 * (1 + level*0.05) = ${l.toFixed(6)}`,`ticketCount = floor(ticketValue / ticketPrice) = ${u}`,`ethValue = ticketCount * ticketPrice = ${m.toFixed(6)}`].join(`
`);return{type:ae,amount:u,description:`${u} ticket${u>1?"s":""} for Lv.${d} (~${m.toFixed(4)} ETH)`,tier:r,ethValue:m,targetLevel:d,math:p}}function Ke(t,e){const n=F(1e3);let o=0,s=Ut[0];for(const c of Ut)if(o+=c.chance,n<o){s=c;break}const a=t,i=Math.floor(Gt*s.ppmPerEth*a/1e6),r=[`lootboxValue = ${t.toFixed(6)} ETH`,`mainRoll = ${e} (11-12 => DGNRS)`,`tierRoll = ${n} => ${s.tier} (${s.ppmPerEth} ppm/ETH)`,"amount = floor(pool * ppm * bet / 1e6)",`= floor(${Gt} * ${s.ppmPerEth} * ${a.toFixed(6)} / 1e6)`,`= ${Math.floor(i).toLocaleString()}`].join(`
`);return{type:ie,amount:Math.max(1,i),description:`${i.toLocaleString()} DGNRS`,tier:s.tier,math:r}}function ze(t){const e=["lootboxValue = n/a",`mainRoll = ${t} (13-14 => WWXRP)`,"amount = 1"].join(`
`);return{type:re,amount:1,description:"1 WWXRP",tier:"small",math:e}}function Je(t,e,n){const o=F(20);let s,a,i;if(o<16){s=rt.low.baseBps,a=rt.low.stepBps;const r=F(16),c=s+a*r,l=t*c/1e4;i=c>5e3?"medium":"small";const u=l*1e3,d=[`lootboxValue = ${t.toFixed(6)} ETH`,`mainRoll = ${n} (15-19 => BURNIE)`,`pathRoll = ${o} (low)`,`stepRoll = ${r}`,`multiplierBps = ${c}`,`amountETH = bet * multiplierBps / 10000 = ${l.toFixed(6)}`,`burnie = amountETH * 1000 = ${Math.floor(u)}`].join(`
`);return{type:vt,amount:Math.floor(u),description:`${Math.floor(u).toLocaleString()} BURNIE`,tier:i,math:d}}else{s=rt.high.baseBps,a=rt.high.stepBps;const r=F(4),c=s+a*r,l=t*c/1e4;i=c>25e3?"mega":"large";const u=l*1e3,d=[`lootboxValue = ${t.toFixed(6)} ETH`,`mainRoll = ${n} (15-19 => BURNIE)`,`pathRoll = ${o} (high)`,`stepRoll = ${r}`,`multiplierBps = ${c}`,`amountETH = bet * multiplierBps / 10000 = ${l.toFixed(6)}`,`burnie = amountETH * 1000 = ${Math.floor(u)}`].join(`
`);return{type:vt,amount:Math.floor(u),description:`${Math.floor(u).toLocaleString()} BURNIE`,tier:i,math:d}}}function Qe(){return{balance:{0:10,1:1e5,2:1e4,3:1e3},activity:De(),totalBets:0,totalWins:0,biggestWin:0}}function Ze(t,e){const n=t.amountPerTicket*t.ticketCount;if(e.balance[t.currency]<n)return null;e.balance[t.currency]-=n,e.totalBets++,e.activity.affiliateBonus=Math.min(e.activity.affiliateBonus+1,100);const o=kt(e.activity),s=oe(o,t.currency);return tn(t,e,s,n,o)}function tn(t,e,n,o,s){if(t.ticketCount!==1)return null;const a=[];let i=0,r=0,c=!1;const l=t.currency===tt?Tt(s):0;for(let f=0;f<t.ticketCount;f++){const M=t.ticket,B=ft(),E=se(M,B,t.amountPerTicket,n,t.currency,s,l,t.heroQuadrant??null);a.push(E),i+=E.payout,E.isJackpot&&(c=!0),E.matches<=1&&Ve(t.amountPerTicket,t.currency)&&r++}const u=i-o;let d=null,m=0,p;if(t.currency===0&&u>0){m=u*.75;const f=o+u*.25;p=f,e.balance[t.currency]+=f,d=je(m,t.currency),en(e,d)}else e.balance[t.currency]+=i;return e.balance[3]+=r,u>0&&(e.totalWins++,u>e.biggestWin&&(e.biggestWin=u)),{mode:1,results:a,totalBet:o,totalPayout:i,netResult:u,consolationPrize:r,hasJackpot:c,lootboxPrize:d,currency:t.currency,amountPerTicket:t.amountPerTicket,ticketCount:t.ticketCount,lootboxValue:m>0?m:void 0,ethPayout:p}}function en(t,e){switch(e.type){case ae:t.balance[0]+=e.amount*.01;break;case ie:t.balance[2]+=e.amount;break;case re:t.balance[3]+=e.amount;break;case vt:t.balance[1]+=e.amount;break}}function nn(t,e){const n=e===tt?"":ne[e];if(e===0){const s=t.toFixed(4);return n?`${s} ${n}`:s}const o=t.toLocaleString(void 0,{maximumFractionDigits:2});return n?`${o} ${n}`:o}const ce={enabled:!0,volume:.3};let b=null;const St={};let Xt=!1;const jt={match1:"/sounds/match1.mp3",match2:"/sounds/match2.mp3",match3:"/sounds/match3.mp3",match4:"/sounds/match4.mp3",match5:"/sounds/match5.mp3",match6:"/sounds/match6.mp3",match7:"/sounds/match7.mp3",match8:"/sounds/match8.mp3",win:"/sounds/win.mp3",lose:"/sounds/lose.mp3",click:"/sounds/click.mp3"},G=[262,294,330,349,392,440,494,523];function O(t,e=.15,n="square"){if(b)try{b.state==="suspended"&&b.resume();const o=b.createOscillator(),s=b.createGain();o.type=n,o.frequency.value=t,s.gain.value=ce.volume*.3,s.gain.exponentialRampToValueAtTime(.001,b.currentTime+e),o.connect(s),s.connect(b.destination),o.start(),o.stop(b.currentTime+e)}catch{}}function on(t){if(b)try{if(b.state==="suspended"&&b.resume(),St[t]){const n=b.createBufferSource(),o=b.createGain();n.buffer=St[t],o.gain.value=ce.volume,n.connect(o),o.connect(b.destination),n.start(0);return}const e=t.match(/^match(\d)$/);if(e){const n=parseInt(e[1],10)-1;n>=0&&n<G.length&&O(G[n],.2,"square");return}t==="win"?[0,2,4,7].forEach((n,o)=>{setTimeout(()=>{O(G[n]*2,.2,"square"),o===3&&setTimeout(()=>{O(G[0]*2,.4,"square"),O(G[2]*2,.4,"square"),O(G[4]*2,.4,"square")},100)},o*100)}):t==="lose"?(O(300,.15,"sawtooth"),setTimeout(()=>O(200,.3,"sawtooth"),150)):t==="click"&&O(400,.05,"triangle")}catch{}}async function Yt(t,e){if(b)try{const n=await fetch(e);if(!n.ok)return;const o=await n.arrayBuffer();St[t]=await b.decodeAudioData(o)}catch{}}function le(){if(!Xt){Xt=!0;try{b=new(window.AudioContext||window.webkitAudioContext);const t=window.requestIdleCallback;typeof t=="function"?t(()=>{Object.entries(jt).forEach(([e,n])=>{Yt(e,n)})},{timeout:3e3}):setTimeout(()=>{Object.entries(jt).forEach(([e,n])=>{Yt(e,n)})},50),console.debug("[degen] Audio initialized")}catch(t){console.debug("[degen] Audio not available:",t)}}}function sn(){const t=()=>{le(),document.removeEventListener("click",t),document.removeEventListener("keydown",t)};document.addEventListener("click",t,{passive:!0}),document.addEventListener("keydown",t,{passive:!0})}const an={chunkSize:6,chunkDelayMs:80};function rn(){const t=[],e=["pink","purple","green","red","blue","orange","silver","gold"],n={crypto:["xrp","tron","sui","monero","solana","chainlink","ethereum","bitcoin"],zodiac:["aries","taurus","gemini","cancer","leo","libra","sagittarius","aquarius"],cards:["club","diamond","heart","spade","horseshoe","cashsack","king","ace"],dice:["1","2","3","4","5","6","7","8"]},o=[3,4,5,6,0,2,1,7];for(const[s,a]of Object.entries(n))a.forEach((i,r)=>{const c=s==="cards"?o[r]:r;e.forEach(l=>{t.push(`/badges-circular/${s}_0${c}_${i}_${l}.svg`)})});return t.push("/specials/special_none.svg"),t}async function wt(){const t=rn(),{chunkSize:e,chunkDelayMs:n}=an;let o=0;for(let s=0;s<t.length;s+=e)t.slice(s,s+e).forEach(i=>{const r=new Image;r.decoding="async","fetchPriority"in r&&(r.fetchPriority="low"),r.src=i,r.onload=()=>{o++}}),await new Promise(i=>setTimeout(i,n));console.debug(`[degen] Preloaded ${o}/${t.length} badges`)}function cn(){const t=()=>{const e=window.requestIdleCallback;typeof e=="function"?e(()=>wt(),{timeout:2e3}):setTimeout(wt,50)};document.readyState==="complete"?t():window.addEventListener("load",t,{once:!0})}let pt=Qe(),T=null,ht=null;const ue=tt,ln=256,Kt="degenerette_spin_speed",un=1.5;let _t=1,L=null,x=!1,I=!1,Q=null;const j="https://api.degener.us";let P=null;const $t="degenerette_referrer_code",dn=Array.from({length:8},(t,e)=>e),mn=[0,1,2,3,4,5,6,7];function fn(){return{traits:[{quadrant:0,color:0,symbol:0},{quadrant:1,color:0,symbol:0},{quadrant:2,color:0,symbol:0},{quadrant:3,color:0,symbol:0}]}}let g=fn(),R=null;const Y=[];let gt=null,Rt=[],Ct=[];const de=t=>document.getElementById(t);function pn(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"&#10;")}function hn(t){return t?` data-tooltip="${pn(t)}"`:""}function me(t){const e=t.results[t.results.length-1];return e?.math?e.math:""}function gn(t){if(!t.lootboxPrize)return;const e=[];return t.currency===0&&t.netResult>0&&t.lootboxValue&&e.push(`${nn(t.lootboxValue,t.currency)} | lootbox value`),e.push(`${t.lootboxPrize.description} | lootbox prize`),e.join(`
`)}function yn(){try{const t=localStorage.getItem($t);return t?t.toUpperCase():null}catch{return null}}function fe(t){try{if(!t){localStorage.removeItem($t);return}localStorage.setItem($t,t.toUpperCase())}catch{}}function q(t="",e=""){const n=document.getElementById("referral-status");n&&(n.textContent=t,n.classList.remove("status-success","status-error","status-pending"),e&&n.classList.add(`status-${e}`))}function bn(){const t=new URLSearchParams(window.location.search),e=t.get("ref")||t.get("referral")||t.get("code");if(!e)return;const n=e.trim().toUpperCase();n&&fe(n),t.delete("ref"),t.delete("referral"),t.delete("code");const o=t.toString(),s=`${window.location.pathname}${o?`?${o}`:""}${window.location.hash}`;window.history.replaceState({},"",s)}function En(){bn(),g=ft(),R=Math.floor(Math.random()*4),It(),z(),Ln(),Mn(),Sn(),$n(),Rn(),kn(),vn(),xt(),Pt(),_n(),Mt(),Lt(),sn(),cn()}function vn(){const t=document.getElementById("randomize-btn");t&&t.addEventListener("click",()=>{x||Nt()})}function Sn(){const t=document.getElementById("spin-speed"),e=document.getElementById("spin-speed-value");if(!t||!e)return;const n=o=>{_t=Number.isFinite(o)?o:1;const s=_t/un;e.textContent=`${s.toFixed(1)}x`};try{const o=localStorage.getItem(Kt),s=o?parseFloat(o):NaN;Number.isFinite(s)?(t.value=s.toFixed(1),n(s)):n(parseFloat(t.value))}catch{n(parseFloat(t.value))}t.addEventListener("input",()=>{const o=parseFloat(t.value);n(o);try{localStorage.setItem(Kt,o.toFixed(1))}catch{}})}function wn(){return!!document.getElementById("rerand-on-spin")?.checked}async function X(t,e={}){const n=await fetch(`${j}${t}`,{...e,credentials:"include",headers:{"Content-Type":"application/json",...e.headers||{}}});if(!n.ok){const o=await n.text();let s="Request failed";try{s=JSON.parse(o).error||s}catch{s=o||s}throw new Error(s)}return n.status===204?null:n.json()}function K(t){T=t,ht=t.activity_score_bps??0,L=t.eth_address??null,It(),z(),lt(),W(),Mt(),Lt(),t?.referrer_code&&fe(null)}async function _n(){try{const t=await X("/api/player");K(t.player)}catch{}}function $n(){const t=document.getElementById("wallet-connect-btn");t&&(t.addEventListener("click",async()=>{if(t.disabled)return;const e=t.querySelector(".btn-text"),n=e?.textContent??t.textContent;if(L){try{await X("/api/wallet/logout",{method:"POST"})}catch{}L=null,T=null,ht=null,lt();return}const o=window.ethereum;if(!o){alert("No Ethereum wallet detected.");return}try{t.disabled=!0,e?e.textContent="Connecting...":t.textContent="Connecting...";const a=(await o.request({method:"eth_requestAccounts"}))?.[0];if(!a)return;const i=await X("/api/wallet/nonce",{method:"POST",body:JSON.stringify({address:a})}),r=await o.request({method:"personal_sign",params:[i.message,a]}),c=yn(),l=await X("/api/wallet/verify",{method:"POST",body:JSON.stringify({address:a,signature:r,referrerCode:c})});K(l.player)}catch(s){console.warn("Wallet connection rejected",s);let a="Wallet connection failed. Please try again.";if(s instanceof Error)a=s.message;else if(s&&typeof s=="object"&&"message"in s){const i=s.message;typeof i=="string"&&(a=i)}alert(a),lt()}finally{t.disabled=!1,e?e.textContent=n||"Connect Wallet":t.textContent=n||"Connect Wallet"}}),lt())}function lt(){const t=document.getElementById("wallet-connect-btn");if(!t)return;const e=t.querySelector(".btn-text");if(!L){e?e.textContent="Connect Wallet":t.textContent="Connect Wallet",W();return}const n=`${L.slice(0,6)}...${L.slice(-4)}`;e?e.textContent=n:t.textContent=n,W()}function Rn(){const t=document.getElementById("discord-connect-btn");t&&(t.addEventListener("click",async()=>{if(P){await Bn();return}window.location.href=`${j}/auth/discord`}),Cn())}async function Cn(){try{const t=await fetch(`${j}/auth/discord/me`,{credentials:"include"});if(!t.ok)throw new Error("Not connected");P=(await t.json())?.user??null}catch{P=null}pe()}async function Bn(){try{await fetch(`${j}/auth/discord/logout`,{method:"POST",credentials:"include"})}catch{}P=null,pe()}function pe(){const t=document.getElementById("discord-connect-btn");if(!t)return;const e=t.querySelector(".btn-text");if(!P){e?e.textContent="Discord":t.textContent="Discord",W();return}e?e.textContent=P.username:t.textContent=P.username,W()}function kn(){const t=document.getElementById("referral-create-btn"),e=document.getElementById("referral-copy-btn");t&&t.addEventListener("click",async()=>{const n=document.getElementById("referral-code-input");if(!n)return;if(!L||!P){q("Connect wallet + Discord","error");return}const o=n.value.trim().toUpperCase();if(!o||!/^[A-Z0-9]{3,12}$/.test(o)){q("3-12 letters or numbers","error");return}const s=document.getElementById("rakeback-select"),a=s?parseInt(s.value,10):0;try{t.disabled=!0,q("Saving...","pending");const i=await X("/api/affiliate/config",{method:"POST",body:JSON.stringify({code:o,rakebackBps:a})});T&&i.player&&(T.referral_code=i.player.referral_code,T.referral_locked=1),W(),q("Saved!","success"),window.setTimeout(()=>q(""),1600)}catch(i){console.error("Referral create failed",i);const r=i?.message||"Unable to create referral code. Please try again.";q(r,"error")}finally{t.disabled=!1}}),e&&e.addEventListener("click",async()=>{const n=T?.referral_code;if(n){const o=`${window.location.origin}${window.location.pathname}?ref=${n}`;try{await navigator.clipboard.writeText(o),e.textContent="Copied!",window.setTimeout(()=>{e.textContent="Copy Link"},1200)}catch{}}}),W()}function W(){const t=document.getElementById("referral-row"),e=document.getElementById("referral-create"),n=document.getElementById("referral-display"),o=document.getElementById("referral-code-value"),s=document.getElementById("referral-code-input");if(!t)return;const a=!!(L&&P);if(t.classList.toggle("hidden",!a),!a){q("");return}const i=T?.referral_code,r=!!T?.referral_locked;i&&r?(e?.classList.add("hidden"),n?.classList.remove("hidden"),o&&(o.textContent=i),q("")):(e?.classList.remove("hidden"),n?.classList.add("hidden"),s&&!s.value&&(s.placeholder="Choose referral code or default"))}function It(){const t=document.getElementById("currency-balance");if(!t)return;const e=T?T.balance_wwxrp:pt.balance[ue],n=Math.floor(e);t.textContent=n.toLocaleString(void 0,{maximumFractionDigits:0})}function Tn(){const t=document.getElementById("leaderboard-list");if(!t)return;if(!Rt.length){t.innerHTML='<p class="placeholder">No leaderboard data yet</p>';return}const e=Rt.map((n,o)=>{const s=n.eth_address?`${n.eth_address.slice(0,6)}...${n.eth_address.slice(-4)}`:"Unknown",a=n.discord_name||s,i=n.discord_avatar?`<img class="leaderboard-avatar" src="${n.discord_avatar}" alt="${a}" />`:'<div class="leaderboard-avatar"></div>',r=Math.floor(n.balance_wwxrp).toLocaleString(void 0,{maximumFractionDigits:0});return`
      <div class="leaderboard-item">
        <div class="leaderboard-rank">#${o+1}</div>
        <div class="leaderboard-user">
          ${i}
          <span class="leaderboard-name" title="${a}">${a}</span>
        </div>
        <div class="leaderboard-balance">${r}</div>
      </div>
    `}).join("");t.innerHTML=e}function zt(t){if(!t)return null;try{const e=JSON.parse(t);return!e||!Array.isArray(e.traits)?null:e}catch{return null}}function In(){const t=document.getElementById("biggest-wins-list");if(!t)return;if(!Ct.length){t.innerHTML='<p class="placeholder">No wins yet</p>';return}const e=Ct.map(n=>{const o=n.eth_address?`${n.eth_address.slice(0,6)}...${n.eth_address.slice(-4)}`:"Unknown",s=n.discord_name||o,a=n.discord_avatar?`<img src="${n.discord_avatar}" alt="${s}" />`:'<div class="leaderboard-avatar"></div>',i=Math.max(0,Math.round(n.bet_amount||0)),r=Math.max(0,Math.round(n.payout||0)),c=i>0?Math.max(1,r/i):0,l=i.toLocaleString(void 0,{maximumFractionDigits:0}),u=r.toLocaleString(void 0,{maximumFractionDigits:0}),d=l.length>9?"num-xlong":l.length>6?"num-long":"",m=u.length>9?"num-xlong":u.length>6?"num-long":"",p=c>=100?`x${Math.round(c)}`:`x${c.toFixed(1)}`,f=p.length>7?"num-long":"",M=zt(n.player_ticket),B=zt(n.house_ticket),E="win",$=M?N(M,"small",B??void 0,!1,E,!0):Z("small"),y=B?N(B,"small",M??void 0,!1,E,!0):Z("small");return`
      <div class="history-item win biggest-win-item">
        <div class="biggest-win-compare">
          <div class="mini-col">
            ${$}
          </div>
          <div class="biggest-win-metrics">
            <div class="biggest-win-user avatar-only">
              ${a}
            </div>
            <div class="biggest-win-metric bet ${d}">${l}</div>
            <div class="biggest-win-metric multiplier ${f}">${p}</div>
            <div class="biggest-win-metric paid ${m}">${u}</div>
          </div>
          <div class="mini-col">
            ${y}
          </div>
        </div>
      </div>
    `}).join("");t.innerHTML=e}async function Mt(){try{const t=await fetch(`${j}/api/leaderboard?limit=10`,{credentials:"include"});if(!t.ok)throw new Error("Failed to load leaderboard");const e=await t.json();Rt=Array.isArray(e?.leaderboard)?e.leaderboard:[],Tn()}catch(t){console.warn("Leaderboard fetch failed",t)}}async function Lt(){try{const t=await fetch(`${j}/api/biggest-wins?limit=5`,{credentials:"include"});if(!t.ok)throw new Error("Failed to load biggest wins");const e=await t.json();Ct=Array.isArray(e?.wins)?e.wins:[],In()}catch(t){console.warn("Biggest wins fetch failed",t)}}function ct(){It()}function yt(t,e){const o=Math.abs(t)>=100?0:e===0?4:1;return t.toLocaleString(void 0,{maximumFractionDigits:o})}function z(){const t=ht??kt(pt.activity),e=Tt(t),n=document.getElementById("activity-score");n&&(n.textContent=`${Math.floor(t/100)}%`,n.setAttribute("data-tooltip",`ROI: ${Fe(e)}`))}function Mn(){const t=document.getElementById("spin-full");t?.addEventListener("click",Zt),t?.addEventListener("dblclick",n=>{n.preventDefault(),x?ge():(I=!0,Zt())});const e=document.getElementById("ft-amount");e?.addEventListener("change",()=>{const n=parseFloat(e.value);if(!Number.isFinite(n))return;const o=Math.max(1,Math.round(n));e.value=o.toString()})}let w=null,V=null;function Ln(){const t=document.getElementById("ft-player");t&&(t.addEventListener("click",e=>{if(x)return;const o=e.target.closest(".gp-quadrant");if(!o||!o.dataset.quadrant)return;const s=parseInt(o.dataset.quadrant,10);xn("quadrant",s,o)}),t.addEventListener("contextmenu",e=>{if(x)return;const o=e.target.closest(".gp-quadrant");if(!o||!o.dataset.quadrant)return;e.preventDefault();const s=parseInt(o.dataset.quadrant,10);R=R===s?null:s,H()}),t.addEventListener("wheel",e=>{if(x)return;const o=e.target.closest(".gp-quadrant");if(!o||!o.dataset.quadrant)return;e.preventDefault();const s=parseInt(o.dataset.quadrant,10),a=o.getBoundingClientRect(),i=e.clientX-a.left-a.width/2,r=e.clientY-a.top-a.height/2,l=Math.hypot(i,r)/(a.width/2),u=e.deltaY>0?1:-1;if(l>=.55){const d=(g.traits[s].color+u+8)%8;g.traits[s].quadrant=s,g.traits[s].color=d}else{const d=(g.traits[s].symbol+u+8)%8;g.traits[s].quadrant=s,g.traits[s].symbol=d}H(),mt()},{passive:!1}),document.addEventListener("click",e=>{const n=document.getElementById("quick-selector");if(!n||n.classList.contains("hidden"))return;const o=e.target;n.contains(o)||V&&V.contains(o)||mt()}),window.addEventListener("resize",()=>{w&&V&&he(V)}))}function H(){gt=null,xt(),Pt()}function xn(t,e,n){if(x)return;const o=document.getElementById("quick-selector");if(o){if(w={mode:t,quadrant:e},V=n,o.className=`quick-selector ${t}`,e!==void 0){const s=te[e],a=_e[s],i=g.traits[e].color,r=mn.map(m=>{const p=Bt[m];return`
        <button data-type="color" data-color="${m}" title="${Se[m]}">
          <span class="color-swatch" style="background: var(--color-${p});"></span>
        </button>
      `}).join(""),c=dn.map(m=>{const p=a[m],f=ee(e,m,i);return`
        <button data-type="symbol" data-symbol="${m}" title="${p}">
          <span class="symbol-swatch"><img src="${f}" alt="${p}" /></span>
        </button>
      `}).join(""),l=R===e,u=l?"Remove Hero":"Set as Hero",d=`<button data-type="hero" class="hero-toggle-btn ${l?"is-hero":""}" title="${u}">${u}</button>`;o.innerHTML=`${r}${c}${d}`}o.classList.remove("hidden"),he(n),o.querySelectorAll("button").forEach(s=>{s.addEventListener("click",()=>{if(w){if(w.mode==="quadrant"&&w.quadrant!==void 0){const a=s.dataset.type;if(a==="color"){const i=parseInt(s.dataset.color||"0",10);g.traits[w.quadrant].quadrant=w.quadrant,g.traits[w.quadrant].color=i,H()}else if(a==="symbol"){const i=parseInt(s.dataset.symbol||"0",10);g.traits[w.quadrant].quadrant=w.quadrant,g.traits[w.quadrant].symbol=i,H()}else a==="hero"&&(R=R===w.quadrant?null:w.quadrant,H())}mt()}})})}}function mt(){const t=document.getElementById("quick-selector");t&&(t.classList.add("hidden"),w=null,V=null)}function he(t){const e=document.getElementById("quick-selector");if(!e)return;const n=t.getBoundingClientRect(),o=12,s=window.scrollX||window.pageXOffset,a=window.scrollY||window.pageYOffset;let i=n.left+s,r=n.bottom+a+8;const c=s+window.innerWidth-e.offsetWidth-o;i>c&&(i=Math.max(o+s,c));const l=a+window.innerHeight-e.offsetHeight-o;r>l&&(r=n.top+a-e.offsetHeight-8),e.style.left=`${i}px`,e.style.top=`${r}px`}function xt(){const t=document.getElementById("ft-player"),e=document.getElementById("ft-house");if(!t||!e)return;const n=gt;if(n&&n.results?.length){const o=n.results[n.results.length-1],s=typeof n.netResult=="number"?n.netResult:0,a=s>0?"win":s<0?"loss":"neutral";t.innerHTML=N(o.playerTicket,"hero",o.resultTicket,!0,a,!0,R),e.innerHTML=N(o.resultTicket,"hero",o.playerTicket,!1,a,!0)}else t.innerHTML=N(g,"hero",void 0,!0,void 0,void 0,R),e.innerHTML=Z("hero")}function Pt(){const t=document.getElementById("net-result-value"),e=document.getElementById("net-result-box"),n=document.getElementById("net-result-token-value");if(!t)return;const o=gt;if(!o){t.textContent="—",n&&(n.textContent="—",n.classList.remove("positive","negative")),e?.classList.remove("has-tooltip"),e?.removeAttribute("data-tooltip");return}o.netResult;const s=o.results[o.results.length-1];let a="—",i=0;if(s&&(typeof s.matches=="number"?a=`${s.matches}`:s.playerTicket&&s.resultTicket&&(a=`${J(s.playerTicket,s.resultTicket)}`),typeof s.matches=="number"?i=s.matches:s.playerTicket&&s.resultTicket&&(i=J(s.playerTicket,s.resultTicket))),t.textContent=a,t.classList.remove("positive","negative"),n){let c=0;if(o.currency===0){const d=o.ethPayout;c=(typeof d=="number"?d:o.totalPayout)-o.totalBet}else c=o.netResult??0;const l=c>0?"+":c<0?"-":"",u=yt(Math.abs(c),o.currency);n.textContent=`${l}${u}`,n.classList.toggle("positive",c>0),n.classList.toggle("negative",c<0);for(let d=1;d<=8;d+=1)n.classList.remove(`win-tier-${d}`);if(c>0){const d=Math.min(8,Math.max(1,i<=1?1:i));n.classList.add(`win-tier-${d}`)}}const r=me(o);e&&r&&(e.classList.add("has-tooltip"),e.setAttribute("data-tooltip",r))}function Pn(t,e,n){const o=document.getElementById("net-result-value"),s=document.getElementById("net-result-box"),a=document.getElementById("net-result-token-value");if(o){if(o.textContent=`${t}`,o.classList.remove("positive","negative"),a){for(let i=1;i<=8;i+=1)a.classList.remove(`win-tier-${i}`);if(x&&e<=0)a.textContent="—",a.classList.remove("positive","negative");else{const i=e>0?"+":e<0?"-":"",r=yt(Math.abs(e),n);if(a.textContent=`${i}${r}`,a.classList.toggle("positive",e>0),a.classList.toggle("negative",e<0),e>0){const c=Math.min(8,Math.max(1,t<=1?1:t));a.classList.add(`win-tier-${c}`)}}}s?.classList.remove("has-tooltip"),s?.removeAttribute("data-tooltip")}}function ge(){I=!0,Q&&Q()}function Nn(t){return I||t<=0?Promise.resolve():new Promise(e=>{let n=!1;const o=()=>{n||(n=!0,Q=null,e())},s=window.setTimeout(o,t);Q=()=>{window.clearTimeout(s),o()}})}function On(t,e,n,o){const s=Bt.length;return{traits:t.traits.map((a,i)=>{const r=e.traits[i],c=n.has(i)?a.color:(r.color+1)%s,l=o.has(i)?a.symbol:(r.symbol+1)%s;return{...a,quadrant:i,color:c,symbol:l}})}}function Et(t,e,n,o,s,a){if(!e)return;const i=ht??kt(pt.activity),r=oe(i),c=Tt(i),l=On(t,e,n,o),u=se(e,l,s,r,a,i,c,R),d=u.payout-s;Pn(u.matches,d,a)}function An(t,e,n){const o=document.getElementById("roll-pop");if(!o||!Number.isFinite(t))return;if(typeof n=="number"&&Number.isFinite(n)){const i=Math.max(1,n/100),r=.9+Math.log10(i)*.6,c=Math.max(.85,Math.min(2.4,r));o.style.setProperty("--pop-scale",c.toFixed(2))}else o.style.removeProperty("--pop-scale");const s=yt(t,e),a=t>0?`+${s}`:s;o.textContent=a,o.classList.remove("positive","negative","neutral"),o.classList.add(t>0?"positive":t<0?"negative":"neutral"),o.classList.remove("roll-pop--show"),o.offsetWidth,o.classList.add("roll-pop--show")}function qn(t){const e=document.querySelector("#ft-player .gamepiece-result"),n=document.querySelector("#ft-house .gamepiece-result"),o=Math.min(16,4+t*2),s=Math.min(9,2+t*.8);[e,n].forEach(a=>{a&&(a.style.setProperty("--jiggle-amp",`${o}px`),a.style.setProperty("--jiggle-rot",`${s}deg`),a.classList.remove("token-jiggle"),a.offsetWidth,a.classList.add("token-jiggle"))})}function A(t){x=t;const e=document.getElementById("spin-full");e&&(e.textContent=t?"SKIP":"SPIN",e.disabled=!1);const n=document.getElementById("randomize-btn");n&&(n.disabled=t);const o=document.getElementById("selection-panel");o&&o.classList.toggle("editing-locked",t),t&&mt()}function Hn(t,e,n){const o=ft(),s=o.traits.map((a,i)=>{const r={...a,quadrant:i};return e.has(i)&&(r.color=t.traits[i].color),n.has(i)&&(r.symbol=t.traits[i].symbol),r});return o.traits=s,o}function Jt(t,e,n){return{traits:t.traits.map((o,s)=>({...o,color:e.has(s)?o.color:-1,symbol:n.has(s)?o.symbol:-1}))}}async function Qt(t,e,n,o){const s=document.getElementById("ft-house");if(!s)return;const a=Math.max(80,ln/_t),i=()=>2+Math.floor(Math.random()*3),r=new Set,c=new Set,l=e&&Number.isFinite(n)&&typeof o=="number",u=()=>{const $=Hn(t,r,c),y=e?Jt(t,r,c):void 0,v=e?Jt(e,r,c):void 0;if(s.innerHTML=N($,"hero",v),e){const h=document.getElementById("ft-player");h&&(h.innerHTML=N(e,"hero",y,!0,void 0,void 0,R))}},d=()=>{Q=null,r.add(0),r.add(1),r.add(2),r.add(3),c.add(0),c.add(1),c.add(2),c.add(3),u(),l&&Et(t,e,r,c,n,o)},m=window.__DEGEN__;let p=0;const f=[0,1,2,3],M=8;let B=0,E=i();for(;B<M;){if(I){I=!1,d();return}let $=null;if(E>0)E-=1;else{const y=[];for(const v of f)r.has(v)?c.has(v)||y.push({quadrant:v,type:"symbol"}):y.push({quadrant:v,type:"color"});if(y.length){const v=y[Math.floor(Math.random()*y.length)],h=v.quadrant,S=v.type==="color";S?r.add(h):c.add(h),B+=1,E=i(),$={quadrant:h,isColorPhase:S}}else break}if(u(),l&&Et(t,e,r,c,n,o),$&&e&&m){const y=e.traits[$.quadrant],v=t.traits[$.quadrant];($.isColorPhase?y.color===v.color:y.symbol===v.symbol)?(p++,m.playSound?.(`match${p}`),p>=3&&qn(p-2)):m.playSound?.("click")}if(I){I=!1,d();return}await Nn(a)}u(),l&&Et(t,e,r,c,n,o)}function Zt(){if(x){ge();return}wn()?Nt():H();const t=ue,e=de("ft-amount"),n=parseFloat(e.value),o=Number.isFinite(n)?Math.max(1,Math.round(n)):NaN;if(isNaN(o)||o<=0){alert("Invalid bet amount");return}if(e.value=o.toString(),!L||!T){const a=Ze({ticket:g,ticketCount:1,currency:t,amountPerTicket:o,heroQuadrant:R},pt);if(!a){alert("Insufficient balance!");return}const i=a.results[a.results.length-1]?.resultTicket;if(!i){ct(),D(a);return}const r=I;if(I=!1,r){ct(),z(),D(a);return}A(!0),Qt(i,g,o,t).then(()=>{ct(),z(),D(a),A(!1)}).catch(()=>{ct(),z(),D(a),A(!1)});return}A(!0),X("/api/spin",{method:"POST",body:JSON.stringify({ticket:g,amount:o,currency:t,heroQuadrant:R})}).then(async s=>{const a=s.result.results[s.result.results.length-1]?.resultTicket;if(!a){K(s.player),D(s.result),A(!1);return}const i=I;if(I=!1,i){K(s.player),D(s.result),A(!1);return}await Qt(a,g,o,t),K(s.player),D(s.result),A(!1)}).catch(s=>{console.error("Spin failed",s);let a="Spin failed. Please try again.";if(s?.message)try{const i=JSON.parse(s.message);i?.error&&(a=i.error)}catch{a=s.message}alert(a),A(!1)})}function N(t,e="small",n,o=!1,s,a,i){const r=e==="mini"?34:e==="small"?52:e==="medium"?70:e==="large"?110:160,c=r*2,l=e==="hero",u=t.traits.map((h,S)=>{const et=ee(h.quadrant,h.symbol,h.color);let U="";if(n){const nt=n.traits[S],ot=nt.color>=0,st=nt.symbol>=0,Ot=ot&&h.color===nt.color,At=st&&h.symbol===nt.symbol;Ot&&At?U="q-both-match":Ot||At?U=ot&&st?"q-partial-match-known":"q-partial-match-unknown":ot&&st?U="q-no-match":(ot||st)&&(U="q-unknown-loss")}const ye=o?"interactive":"",be=i===S?"q-hero":"",Ee=l?"gamepiece-badge hero-badge":"gamepiece-badge",ve=l?"":` style="width:${r}px;height:${r}px;"`;return`<div class="gp-quadrant ${U} ${ye} ${be}" data-quadrant="${S}"><img src="${et}" class="${Ee}" data-q="${S}"${ve} /></div>`}).join(""),d=!!(a&&n),m=s&&!d?`result-${s}`:"",p=d&&(s==="win"||s==="loss")?`center-bg-${s}`:"",f=d&&s?s==="win"?"flame-win":`flame-${s}`:"",E=`<div class="gamepiece-special-container ${[m,p,f].filter(Boolean).join(" ")}"><img src="/specials/special_none.svg" alt="Flame" class="gamepiece-special-icon" /></div>`,$=o?'data-interactive="true"':"",y=l?" gamepiece-hero":"",v=l?"":` style="width:${c}px;height:${c}px;"`;return`<div class="gamepiece-result${y}" ${$}${v}>${u}${E}</div>`}function Z(t="small"){const n=(t==="mini"?34:t==="small"?52:t==="medium"?70:t==="large"?110:160)*2,o=t==="hero",s=Array.from({length:4},()=>'<div class="gp-quadrant empty"></div>').join(""),a=o?" gamepiece-hero":"",i=o?"":` style="width:${n}px;height:${n}px;"`;return`
    <div class="gamepiece-result is-empty${a}"${i}>
      ${s}
      <div class="gamepiece-special-container"></div>
    </div>
  `}function Dn(t){const e=me(t),n=gn(t),o=n?`${e}
---
${n}`:e,s=t.results[t.results.length-1],a={currency:t.currency,totalBet:t.totalBet,totalPayout:t.totalPayout,netResult:t.netResult,tooltip:o,timestamp:Date.now()};s&&(a.playerTicket=s.playerTicket,a.resultTicket=s.resultTicket),Y.unshift(a),Y.length>50&&Y.pop(),Fn()}function Fn(){const t=de("results-container");if(Y.length===0){t.innerHTML='<p class="placeholder">No history yet</p>';return}const e=Y.map((n,o)=>{const s=n.netResult>=0,a=n.netResult>0?"win":n.netResult<0?"loss":"neutral",i=(n.netResult>=0?"+":"")+yt(n.netResult,n.currency),r=n.tooltip??"";let c="—",l="Matches: —",u=0;if(n.playerTicket&&n.resultTicket){const f=J(n.playerTicket,n.resultTicket);u=f,c=`${f}`,l=`Matches: ${c}`}const d=n.netResult>0?Math.min(8,Math.max(1,u<=1?1:u)):null,m=d?`win-tier-${d}`:"",p=`
      <div class="history-compare">
        <div class="mini-col">
          <span class="mini-label you-label">You</span>
          ${n.playerTicket?N(n.playerTicket,"small",n.resultTicket,!1,a,!0):Z("small")}
        </div>
        <div class="history-net-big ${s?"positive":"negative"} ${m} has-tooltip"${hn(r)}>${i}</div>
        <div class="mini-col">
          <span class="mini-label matches-label">${l}</span>
          ${n.resultTicket?N(n.resultTicket,"small",n.playerTicket,!1,a,!0):Z("small")}
        </div>
      </div>
    `;return`
      <div class="history-item ${s?"win":"loss"}">
        ${p}
      </div>
    `}).join("");t.innerHTML=`<div class="history-list">${e}</div>`}function D(t){gt=t,Dn(t),xt(),Pt();const n=t.results[t.results.length-1]?.payoutMultiplierBps;An(t.netResult??0,t.currency,n),Mt(),Lt();const o=window.__DEGEN__;if(o){const s=t.results[t.results.length-1];if(s){const a=typeof s.matches=="number"?s.matches:s.playerTicket&&s.resultTicket?J(s.playerTicket,s.resultTicket):0,i=t.netResult>0;setTimeout(()=>{a>=6||i||a>=3?o.playSound?.("win"):o.playSound?.("lose")},200)}}}function Nt(){g=ft(),R=Math.floor(Math.random()*4),H()}window.__DEGEN__=window.__DEGEN__||{};window.__DEGEN__.randomize=Nt;window.__DEGEN__.getCurrentTicket=()=>g;window.__DEGEN__.setTicket=t=>{g=t,H()};window.__DEGEN__.playSound=on;window.__DEGEN__.initAudio=le;window.__DEGEN__.preloadBadges=wt;En();
